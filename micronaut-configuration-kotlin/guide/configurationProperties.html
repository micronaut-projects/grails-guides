<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>3 Team Configuration with @ConfigurationProperties null</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        @Configuration and @ConfigurationBuilder
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/gettingStarted.html"><strong>1</strong><span>Getting Started</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/writingTheApp.html"><strong>2</strong><span>Writing the Application</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/configurationProperties.html"><strong>3</strong><span>Team Configuration with @ConfigurationProperties</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/configurationBuilder.html"><strong>4</strong><span>Team Admin Builder with @ConfigurationBuilder</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/eachProperty.html"><strong>5</strong><span>Stadiums with @EachProperty</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/runningTheApp.html"><strong>6</strong><span>Running the Application</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/controller.html"><strong>7</strong><span>Controller</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/graal.html"><strong>8</strong><span>Generating a Micronaut Application's Native Image with GraalVM</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/next.html"><strong>9</strong><span>Where To Go From Here?</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/help.html"><strong>10</strong><span>Help with Micronaut</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
            <li class="separator selected">
                <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/writingTheApp.html">&lt;&lt; <strong>2</strong><span>Writing the Application</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/configurationBuilder.html"><strong>4</strong><span>Team Admin Builder with @ConfigurationBuilder</span> >></a></div>
                


                <div class="project">
                    <h1>3 Team Configuration with @ConfigurationProperties</h1>

                    <p><strong>Version:</strong> null</p>
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#configurationPropertiesTest"><strong>3.1</strong><span>Test @ConfigurationProperties</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="configurationProperties">3 Team Configuration with @ConfigurationProperties</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-configuration-kotlin/edit/master/src/main/docs/guide/configurationProperties.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Imagine a feature where you can configure a sports team in a declarative manner. The team has a few attributes like team name, color,
and players.</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml" data-lang="yml">team:
  name: 'Steelers'
  color: 'Black'
  player-names:
    - 'Mason Rudolph'
    - 'James Connor'</code></pre>
</div>
</div>
<div class="paragraph">
<p>With Micronaut we can use the <code>@ConfigurationProperties</code> annotation to slurp the configuration into a bean. Each property that matches
the configuration in the <code>application.yml</code> will call the setter in the bean. The bean will be subsequently available for injection in the application!</p>
</div>
<div class="listingblock">
<div class="title">src/main/kotlin/example/micronaut/TeamConfiguration.kt</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin" data-lang="kotlin">package example.micronaut

import io.micronaut.context.annotation.ConfigurationBuilder
import io.micronaut.context.annotation.ConfigurationProperties

@ConfigurationProperties("team")
class TeamConfiguration  {
    var name: String? = null
    var color: String? = null
    var playerNames: List&lt;String&gt;? = null
}</code></pre>
</div>
</div>


<h2 id="configurationPropertiesTest">3.1 Test @ConfigurationProperties</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-configuration-kotlin/edit/master/src/main/docs/guide/configurationPropertiesTest.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Let&#8217;s validate that the bean is available in the application context and is created with the values declared in the <code>application.xml</code>.</p>
</div>
<div class="listingblock">
<div class="title">src/test/kotlin/example/micronaut/TeamConfigurationTest.kt</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-kotlin" data-lang="kotlin">package example.micronaut

import io.micronaut.context.ApplicationContext
import org.junit.jupiter.api.Assertions
import org.junit.jupiter.api.Test
import java.util.*
import java.util.function.Consumer
import kotlin.collections.HashMap

class TeamConfigurationTest {
    //tag::teamConfigSpecNoBuilder[]
    @Test
    fun testTeamConfiguration() {
        val names = Arrays.asList("Nirav Assar", "Lionel Messi")
        val items: MutableMap&lt;String, Any&gt; = HashMap()
        items["team.name"] = "evolution"
        items["team.color"] = "green"
        items["team.player-names"] = names
        val ctx = ApplicationContext.run(ApplicationContext::class.java, items) <i class="conum" data-value="1"></i><b>(1)</b>
        val teamConfiguration = ctx.getBean(TeamConfiguration::class.java)
        Assertions.assertEquals("evolution", teamConfiguration.name)
        Assertions.assertEquals("green", teamConfiguration.color)
        Assertions.assertEquals(names.size, teamConfiguration.playerNames!!.size)
        names.forEach(Consumer { name: String? -&gt; Assertions.assertTrue(teamConfiguration.playerNames!!.contains(name!!)) })
        ctx.close()
    }

    //end::teamConfigSpecNoBuilder[]
    @Test
    fun testBuilderPatternPlainUsage() {
        val teamAdmin = TeamAdmin.Builder().withManager("Nirav")
                .withCoach("Tommy")
                .withPresident("Mark").build()
        Assertions.assertEquals("Nirav", teamAdmin.manager)
        Assertions.assertEquals("Tommy", teamAdmin.coach)
        Assertions.assertEquals("Mark", teamAdmin.president)
    }

    //tag::teamConfigSpecBuilder[]
    @Test
    fun testTeamConfigurationBuilder() {
        val names = Arrays.asList("Nirav Assar", "Lionel Messi")
        val items: MutableMap&lt;String, Any&gt; = HashMap()
        items["team.name"] = "evolution"
        items["team.color"] = "green"
        items["team.team-admin.manager"] = "Jerry Jones" <i class="conum" data-value="1"></i><b>(1)</b>
        items["team.team-admin.coach"] = "Tommy O'Neill"
        items["team.team-admin.president"] = "Mark Scanell"
        items["team.player-names"] = names
        val ctx = ApplicationContext.run(ApplicationContext::class.java, items)
        val teamConfiguration = ctx.getBean(TeamConfiguration::class.java)
        val teamAdmin = teamConfiguration.builder.build() <i class="conum" data-value="2"></i><b>(2)</b>
        Assertions.assertEquals("evolution", teamConfiguration.name)
        Assertions.assertEquals("green", teamConfiguration.color)
        Assertions.assertEquals("Nirav Assar", teamConfiguration.playerNames!![0])
        Assertions.assertEquals("Lionel Messi", teamConfiguration.playerNames!![1])

        // check the builder has values set
        Assertions.assertEquals("Jerry Jones", teamConfiguration.builder.manager)
        Assertions.assertEquals("Tommy O'Neill", teamConfiguration.builder.coach)
        Assertions.assertEquals("Mark Scanell", teamConfiguration.builder.president)

        // check the object can be built
        Assertions.assertEquals("Jerry Jones", teamAdmin.manager) <i class="conum" data-value="3"></i><b>(3)</b>
        Assertions.assertEquals("Tommy O'Neill", teamAdmin.coach)
        Assertions.assertEquals("Mark Scanell", teamAdmin.president)
        ctx.close()
    } //end::teamConfigSpecBuilder[]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Start application context with configuration</td>
</tr>
</table>
</div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/writingTheApp.html">&lt;&lt; <strong>2</strong><span>Writing the Application</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/configurationBuilder.html"><strong>4</strong><span>Team Admin Builder with @ConfigurationBuilder</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically. All guides are released with an ASLv2 license for the code, and Creative Commons license for the writing.
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>

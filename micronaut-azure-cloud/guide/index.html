<!DOCTYPE html>
<html>
<head>
    <meta name='google-site-verification' content='REYQ1_I6HGowAE7LOLVqfQbnKaB4IfFpMlGzMbJj55Q' />
    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <link rel='icon' href='../img/micronaut-favicon.ico' />
    <meta charset='UTF-8' />
    <title>Deploy a Micronaut app to Microsoft Azure | Micronaut Guides | Micronaut Framework</title>
    <meta name='description' content='Deploy a Micronaut app to Microsoft Azure. Learn how to deploy a Micronaut application to Microsoft Azure.' />
    <link rel="stylesheet" href="../css/highlight/agate.css">
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel='stylesheet' href='../css/main.css' />
    <link rel='stylesheet' href='../css/screen.css' />
    <script src='https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js'></script>
</head>
<body class='guide'>
<div id="navigation">
    <div class="navTitle">
        <span id="logo"><a href="http://micronaut.io" title="Go to Micronaut Website"><img src="../img/micronaut-logo-white.svg" alt="Micronaut"/></a></span>
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <a href="http://guides.micronaut.io">Micronaut Guides</a>
                <span> &rarr; </span>
                <a href="http://guides.micronaut.io/micronaut-azure-cloud/guide/index.html">Deploy a Micronaut app to Microsoft Azure</a>
            </li>
        </ul>

    </div>
</div>

<div class='fullwidth'><article class="guide">
    <aside>
        <a href="https://travis-ci.org/micronaut-guides/micronaut-azure-cloud"><img src="https://travis-ci.org/micronaut-guides/micronaut-azure-cloud.svg?branch=master"></a>

        <button type="button" class="btn btn-large" onclick="window.location.href=&quot;https://github.com/micronaut-guides/micronaut-azure-cloud&quot;"><img height="15" src="../img/github_white.svg" alt="Github"/><span>&nbsp;Get the Code</span></button>


        <ul class="githublinks">
            <li><button type="button" class="btn btn-default" href="#" onclick="document.getElementById('github-url').value='git@github.com:micronaut-guides/micronaut-azure-cloud.git'" class="codeButton">SSH</button></li>
            <li><button type="button" class="btn btn-default" onclick="document.getElementById('github-url').value='https://github.com/micronaut-guides/micronaut-azure-cloud.git'" class="codeButton">HTTPS</button></li>
        </ul>
        <div class="input-group">
            <!-- Target -->
            <input id="github-url" value="git@github.com:micronaut-guides/micronaut-azure-cloud.git" type="text" />
            <!-- Trigger -->
            <button type="button" class="clippy btn btn-default" type="button" data-clipboard-target="#github-url">
                <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
            </button>
        </div>
        <script>var clipboard = new Clipboard('.clippy');</script>
        <button type="button" class="btn btn-large" onclick="window.location.href=&quot;https://github.com/micronaut-guides/micronaut-azure-cloud/archive/master.zip&quot;">Download ZIP</button>
        
        <div id="table-of-content">
            <h3>Table of Contents</h3>
            
            <div class="toc-item" style="margin-left:0px"><a href="#training"><strong>1</strong><span>Micronaut Training</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#gettingStarted"><strong>2</strong><span>Getting Started</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#costs"><strong>3</strong><span>Costs</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#whatYouWillNeed"><strong>4</strong><span>What you will need</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#howToComplete"><strong>5</strong><span>How to Complete</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#mavenPlugin"><strong>6</strong><span>Maven Plugin for Azure App Service</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#controller"><strong>7</strong><span>Sample Controller</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#deployingTheApp"><strong>8</strong><span>Deploying the app</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#logging"><strong>9</strong><span>Logging</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#cleaningUp"><strong>10</strong><span>Cleaning Up</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#learnMore"><strong>11</strong><span>Learn More</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#help"><strong>12</strong><span>Help with Micronaut</span></a></div>
            
            <div style="clear:both" ></div>
        </div>
        
    </aside>
    <header>
        <h1>Deploy a Micronaut app to Microsoft Azure</h1>
        <p>Learn how to deploy a Micronaut application to Microsoft Azure.</p>
        <p><strong>Authors:</strong> Bruno Borges</p>
        <p><strong>Micronaut Version:</strong> 1.2.7</p>
    </header>
    

<h1 id="training">1 Micronaut Training</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/training.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p><strong>Micronaut Training</strong> - Developed and delivered by the folks who created and actively maintain the Micronaut framework!</p>
</div>
<div id="ocitraining"></div>
<script type="text/javascript">
var getJSON = function(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.responseType = 'json';
    xhr.onload = function() {
      var status = xhr.status;
      if (status == 200) {
        callback(null, xhr.response);
      } else {
        callback(status);
      }
    };
    xhr.send();
};
getJSON('https://oci-training.cfapps.io/training', function(err, data) {
  var msg = '';
  if (err != null) {
      msg = 'Something went wrong while retrieving OCI training offerings';

  } else {
      if ( data.length == 0 ) {
         msg = '<p><b>Nothing scheduled at the moment - please check back again soon!</b></p>.';

      } else {
        msg += '<table>';
        msg += '<thead>';
        msg += '<tr><th>Course</th><th>Date(s)</th><th>Instructor(s)</th><th>Hour(s)</th></tr>';
        msg += '</thead>';
        msg += '<tbody>';
        for ( var i = 0; i < data.length; i++ ) {
            msg += '<tr><td><a href="'+ data[i].enrollmentLink + '">'+ data[i].course + '</a></td><td>'+ data[i].dates + '</td><td>'+ data[i].instructors + '</td><td>'+ data[i].hours + '</td></tr>';
        }
        msg += '</tbody>';
        msg += '</table>';
      }
  }
  var ociTraining = document.getElementById("ocitraining");
  ociTraining.innerHTML = msg;
});
</script>


<h1 id="gettingStarted">2 Getting Started</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/gettingStarted.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>In this guide, you are going to deploy a Micronaut application
to <a href="https://azure.microsoft.com/en-us/services/app-service/web/?WT.mc_id=opensource-micronaut-brborges">Microsoft Azure App Service for Web Apps</a>.</p>
</div>


<h1 id="costs">3 Costs</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/costs.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>This guide uses services available in the <a href="https://azure.microsoft.com/free/free-account-faq/?WT.mc_id=opensource-micronaut-brborges">Always Free Tier</a> of <a href="https://azure.microsoft.com/free/?WT.mc_id=opensource-micronaut-brborges">Microsoft Azure Free Account</a>. If you don&#8217;t have one already, <a href="https://azure.microsoft.com/free/?WT.mc_id=opensource-micronaut-brborges">create your account</a> to complete this guide.</p>
</div>


<h1 id="whatYouWillNeed">4 What you will need</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/whatYouWillNeed.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To complete this guide, you will need the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some time on your hands</p>
</li>
<li>
<p>A decent text editor or IDE</p>
</li>
<li>
<p><a href="https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest?WT.mc_id=opensource-micronaut-brborges">Azure CLI</a> installed and <a href="https://docs.microsoft.com/en-us/cli/azure/authenticate-azure-cli?WT.mc_id=opensource-micronaut-brborges&amp;view=azure-cli-latest#sign-in-interactively">authenticated</a></p>
</li>
<li>
<p>JDK 8 installed with JAVA_HOME configured appropriately (cannot be Java 9 or later)</p>
</li>
</ul>
</div>


<h1 id="howToComplete">5 How to Complete</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/howToComplete.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To get started do the following:</p>
</div>
<div class="paragraph">
<p>Download and unzip the source or clone the following GitHub repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">git clone https://github.com/micronaut-guides/micronaut-azure-cloud.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>This Micronaut guide contains two folders:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>initial</code> Initial project. A simple Micronaut app as you may have created with Micronaut CLI.``</p>
</li>
<li>
<p><code>complete</code> A completed example. It is the result of working through the steps presented by the guide and applying those changes to the initial folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To complete the guide, go to the initial folder</p>
</div>
<div class="paragraph">
<p><code>cd initial</code></p>
</div>
<div class="paragraph">
<p>and follow the instructions in the next sections.</p>
</div>
<div class="paragraph">
<p>or you can go right to the completed example:</p>
</div>
<div class="paragraph">
<p><code>cd complete</code></p>
</div>
<div class="paragraph">
<p>Although you can go right to the completed example, in order to deploy the app you
would need to complete several configuration steps in Microsoft Azure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install the <a href="https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest?WT.mc_id=opensource-micronaut-brborges">Azure CLI</a></p>
</li>
<li>
<p><a href="https://docs.microsoft.com/en-us/cli/azure/authenticate-azure-cli?WT.mc_id=opensource-micronaut-brborges&amp;view=azure-cli-latest#sign-in-interactively">Authenticate</a> with your Azure account</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After you&#8217;ve checked out the links above, follow below for the next steps on setting up the Maven plugin for Azure deployment.</p>
</div>


<h1 id="mavenPlugin">6 Maven Plugin for Azure App Service</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/mavenPlugin.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>First, make sure you have the Azure CLI installed and authenticated:</p>
</div>
<div class="paragraph">
<p><code>$ az login</code></p>
</div>
<div class="paragraph">
<p>Then, open the <code>pom.xml</code> file and add the following <code>&lt;plugin&gt;</code> inside the <code>&lt;plugins&gt;</code> section of the Maven <code>&lt;build&gt;</code> definition of the POM:</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">      &lt;plugin&gt;
        &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;
        &lt;artifactId&gt;azure-webapp-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.6.0&lt;/version&gt;
      &lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the file.</p>
</div>
<div class="paragraph">
<p>Now you can run the following goal to help you configure the required settings:</p>
</div>
<div class="paragraph">
<p><code>mvn azure-webapp:config</code></p>
</div>
<div class="paragraph">
<p>Make sure you select the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OS: linux</p>
</li>
<li>
<p>javaVersion: jre8</p>
</li>
<li>
<p>runtimeStack: jre8</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is how it looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[INFO] --- azure-webapp-maven-plugin:1.6.0:config (default-cli) @ example-micronaut ---
[WARNING] The plugin may not work if you change the os of an existing webapp.
Define value for OS(Default: Linux):
1. linux [*]
2. windows
3. docker
Enter index to use: 1
Define value for javaVersion(Default: jre8):
1. jre8 [*]
2. java11
Enter index to use: 1
Define value for runtimeStack(Default: TOMCAT 8.5):
1. TOMCAT 9.0
2. jre8
3. TOMCAT 8.5 [*]
4. WILDFLY 14
Enter index to use: 2
Please confirm webapp properties
AppName : example-micronaut-1560245627178
ResourceGroup : example-micronaut-1560245627178-rg
Region : westeurope
PricingTier : Premium_P1V2
OS : Linux
RuntimeStack : JAVA 8-jre8
Deploy to slot : false
Confirm (Y/N)? :
[INFO] Saving configuration to pom.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------</pre>
</div>
</div>
<div class="paragraph">
<p>Check your <code>pom.xml</code> to see the new configuration done for you.</p>
</div>


<h1 id="controller">7 Sample Controller</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/controller.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Create a controller which we can invoke once the app is deployed.</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/example/micronaut/HelloController.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">package example.micronaut;

import io.micronaut.http.MediaType;
import io.micronaut.http.annotation.*;

@Controller("/")
public class HelloController {

    @Get(value = "/", produces = MediaType.TEXT_PLAIN)
    public String index() {
        return "Micronaut on Azure";
    }
}</code></pre>
</div>
</div>


<h1 id="deployingTheApp">8 Deploying the app</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/deployingTheApp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To deploy the app to Azure run:</p>
</div>
<div class="paragraph">
<p><code>mvn package azure-webapp:deploy</code></p>
</div>
<div class="paragraph">
<p>With a <code>BUILD SUCCESS</code>, you should see a message containing the URL of your newly deployed web app:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>...
[INFO] Authenticate with Azure CLI 2.0
[INFO] Target Web App doesn't exist. Creating a new one...
[INFO] Creating App Service Plan 'ServicePlan2ef7a87d-fb15-4d3e'...
[INFO] Successfully created App Service Plan.
[INFO] Successfully created Web App.
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 2 resources to /azure/projects/micronaut-azure-cloud/initial/target/azure-webapp/example-micronaut-1560242864679
[INFO] Trying to deploy artifact to example-micronaut-1560242864679...
[INFO] Renaming /azure/projects/micronaut-azure-cloud/initial/target/azure-webapp/example-micronaut-1560242864679/example-micronaut-0.1.jar to app.jar
[INFO] Deploying the zip package example-micronaut-1560242864679.zip...
[INFO] Exception occurred during deployment: java.net.SocketTimeoutException: timeout, retry immediately(1/3)...
[INFO] Successfully deployed the artifact to https://example-micronaut-1560242864679.azurewebsites.net
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 01:59 min
[INFO] Finished at: 2019-06-11T02:02:15-07:00
[INFO] ------------------------------------------------------------------------</pre>
</div>
</div>


<h1 id="logging">9 Logging</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/logging.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To see the log of your application running on Azure, you have to first enable storage of your app logging, and then perform a tail for live streaming.</p>
</div>
<div class="paragraph">
<p>To enable logging storage, use the following Azure CLI command. Check your <code>pom.xml</code> for the generated <code>&lt;resourceGroup&gt;</code> and the <code>&lt;appName&gt;</code></p>
</div>
<div class="paragraph">
<p><code>az webapp log config --name [appName] -g [resourceGroup] --web-server-logging filesystem</code></p>
</div>
<div class="paragraph">
<p>Once this is done, you can then tail the log live from the cloud:</p>
</div>
<div class="paragraph">
<p><code>az webapp log tail --name [appName] -g [resourceGroup]</code></p>
</div>
<div class="paragraph">
<p>If you don&#8217;t see any log, try changing the level of the project&#8217;s Logback configuration in <code>logback.xml</code> to a higher value such as <code>debug</code>, then run the Maven deployment command again:</p>
</div>
<div class="paragraph">
<p><code>mvn package azure-webapp:deploy</code></p>
</div>
<div class="paragraph">
<p>And then run the tail command above once again.</p>
</div>


<h1 id="cleaningUp">10 Cleaning Up</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/cleaningUp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>After you&#8217;ve finished this guide, you can clean up the resources you created on
Azure so you won&#8217;t take the risk of being billed because of them in the future. The following
sections describe how to delete or turn off these resources.</p>
</div>
<div class="paragraph">
<p>Delete the resource group and all of its resources created along this guide with the following command:</p>
</div>
<div class="paragraph">
<p><code>az group delete -g [resourceGroup]</code></p>
</div>
<div class="paragraph">
<p>Answer <code>y</code> to confirm.</p>
</div>
<div class="paragraph">
<p>You can add the <code>--no-wait</code> parameter to not wait for the command to finish.</p>
</div>


<h1 id="learnMore">11 Learn More</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-azure-cloud/edit/master/src/main/docs/guide/learnMore.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If you want to learn more about Microsoft Azure for Java development, visit <a href="https://docs.microsoft.com/java/azure" class="bare">https://docs.microsoft.com/java/azure</a>.</p>
</div>


<h1 id="help">12 Help with Micronaut</h1>

    <h3 style="color: #333; margin-bottom:25px;"><a href="https://objectcomputing.com/" target="_blank">Object Computing, Inc.</a> (OCI) sponsored the creation of this Guide. A variety of consulting and support services are available.</h3>

    <!--[if lte IE 8]>
    <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2-legacy.js"></script>
    <![endif]-->
    <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
    <script>
        hbspt.forms.create({
            portalId: "4547412",
            formId: "24edfcbb-b6f2-4fcf-af48-35ab6271031e"
        });
    </script>

    <h3 style="color: #333;">OCI is Home to Micronaut.</h3>

    <p><a href="https://objectcomputing.com/products/2gm-team" target="_blank">Meet the Team</a></p>

</article>
</div>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115754405-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-115754405-1');
</script>
</body>
</html>

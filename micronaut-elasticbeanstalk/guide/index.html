<!DOCTYPE html>
<html>
<head>
    <meta name='google-site-verification' content='REYQ1_I6HGowAE7LOLVqfQbnKaB4IfFpMlGzMbJj55Q' />
    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <link rel='icon' href='../img/micronaut-favicon.ico' />
    <meta charset='UTF-8' />
    <title>Deploy to AWS ElasticBeanstalk | Micronaut Guides | Micronaut Framework</title>
    <meta name='description' content='Deploy to AWS ElasticBeanstalk. Learn how easy is to deploy a Micronaut App to Elastic Beanstalk.' />
    <link rel="stylesheet" href="../css/highlight/agate.css">
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel='stylesheet' href='../css/main.css' />
    <link rel='stylesheet' href='../css/screen.css' />
    <script src='https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js'></script>
</head>
<body class='guide'>
<div id="navigation">
    <div class="navTitle">
        <span id="logo"><a href="http://micronaut.io" title="Go to Micronaut Website"><img src="../img/micronaut-logo-white.svg" alt="Micronaut"/></a></span>
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <a href="http://guides.micronaut.io">Micronaut Guides</a>
                <span> &rarr; </span>
                <a href="http://guides.micronaut.io/micronaut-elasticbeanstalk/guide/index.html">Deploy to AWS ElasticBeanstalk</a>
            </li>
        </ul>

    </div>
</div>

<div class='fullwidth'><article class="guide">
    <aside>
        <a href="https://travis-ci.org/micronaut-guides/micronaut-elasticbeanstalk"><img src="https://travis-ci.org/micronaut-guides/micronaut-elasticbeanstalk.svg?branch=master"></a>

        <button type="button" class="btn btn-large" onclick="window.location.href=&quot;https://github.com/micronaut-guides/micronaut-elasticbeanstalk&quot;"><img height="15" src="../img/github_white.svg" alt="Github"/><span>&nbsp;Get the Code</span></button>


        <ul class="githublinks">
            <li><button type="button" class="btn btn-default" href="#" onclick="document.getElementById('github-url').value='git@github.com:micronaut-guides/micronaut-elasticbeanstalk.git'" class="codeButton">SSH</button></li>
            <li><button type="button" class="btn btn-default" onclick="document.getElementById('github-url').value='https://github.com/micronaut-guides/micronaut-elasticbeanstalk.git'" class="codeButton">HTTPS</button></li>
        </ul>
        <div class="input-group">
            <!-- Target -->
            <input id="github-url" value="git@github.com:micronaut-guides/micronaut-elasticbeanstalk.git" type="text" />
            <!-- Trigger -->
            <button type="button" class="clippy btn btn-default" type="button" data-clipboard-target="#github-url">
                <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
            </button>
        </div>
        <script>var clipboard = new Clipboard('.clippy');</script>
        <button type="button" class="btn btn-large" onclick="window.location.href=&quot;https://github.com/micronaut-guides/micronaut-elasticbeanstalk/archive/master.zip&quot;">Download ZIP</button>
        
        <div id="table-of-content">
            <h3>Table of Contents</h3>
            
            <div class="toc-item" style="margin-left:0px"><a href="#gettingStarted"><strong>1</strong><span>Getting Started</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#requirements"><strong>1.1</strong><span>What you will need</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#solution"><strong>1.2</strong><span>Solution</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#writingTheApp"><strong>2</strong><span>Writing the App</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#deploy"><strong>3</strong><span>Deploy to Elastic Beanstalk</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#nextSteps"><strong>4</strong><span>Next Steps</span></a></div>
            
            <div style="clear:both" ></div>
        </div>
        
    </aside>
    <header>
        <h1>Deploy to AWS ElasticBeanstalk</h1>
        <p>Learn how easy is to deploy a Micronaut App to Elastic Beanstalk.</p>
        <p><strong>Authors:</strong> Sergio del Amo</p>
        <p><strong>Micronaut Version:</strong> 1.0.0.M4</p>
    </header>
    

<h1 id="gettingStarted">1 Getting Started</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-elasticbeanstalk/edit/master/src/main/docs/guide/gettingStarted.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>In this guide, you will learn how to deploy a Micronaut app to <a href="https://aws.amazon.com/elasticbeanstalk/">AWS Elastic Beanstalk</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>AWS Elastic Beanstalk is an easy-to-use service for deploying and scaling web applications and services developed with Java.</p>
</div>
</blockquote>
</div>


<h2 id="requirements">1.1 What you will need</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-elasticbeanstalk/edit/master/src/main/docs/guide/requirements.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To complete this guide, you will need the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some time on your hands</p>
</li>
<li>
<p>A decent text editor or IDE</p>
</li>
<li>
<p>JDK 1.8 or greater installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You will need also an <a href="https://aws.amazon.com/account/">AWS Account</a>.</p>
</div>


<h2 id="solution">1.2 Solution</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-elasticbeanstalk/edit/master/src/main/docs/guide/solution.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>We recommend you to follow the instructions in the next sections and create the app step by step. However, you can go right to the <strong>completed example</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/micronaut-guides/micronaut-elasticbeanstalk/archive/master.zip">Download</a> and unzip the source</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clone the <a href="https://git-scm.com/">Git</a> repository: <code>git clone <a href="https://github.com/micronaut-guides/micronaut-elasticbeanstalk.git" class="bare">https://github.com/micronaut-guides/micronaut-elasticbeanstalk.git</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then, <code>cd</code> into the <code>complete</code> folder which you will find in the root project of the downloaded/cloned project.</p>
</div>


<h1 id="writingTheApp">2 Writing the App</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-elasticbeanstalk/edit/master/src/main/docs/guide/writingTheApp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Create the microservice:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">mn create-app example.micronaut.complete</code></pre>
</div>
</div>
<div class="paragraph">
<p>Micronaut management dependency adds support for monitoring of your application via endpoints: special URIs that return details about the health and state of your application.</p>
</div>
<div class="paragraph">
<p>Add the <code>management</code> dependency:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy" data-lang="groovy">    compile "io.micronaut:management"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you include the <code>management</code> dependency a <code>/health</code> endpoint is exposed.</p>
</div>
<div class="paragraph">
<p>Create a test which verifies it:</p>
</div>
<div class="listingblock">
<div class="title">src/test/java/example/micronaut/HealthTest.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">package example.micronaut;

import io.micronaut.context.ApplicationContext;
import io.micronaut.http.HttpRequest;
import io.micronaut.http.client.HttpClient;
import io.micronaut.runtime.server.EmbeddedServer;
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertTrue;

import java.util.Map;

public class HealthTest {

    private static EmbeddedServer server;
    private static HttpClient client;

    @BeforeClass
    public static void setupServer() {
        server = ApplicationContext.run(EmbeddedServer.class); <i class="conum" data-value="1"></i><b>(1)</b>
        client = server
                .getApplicationContext()
                .createBean(HttpClient.class, server.getURL()); <i class="conum" data-value="2"></i><b>(2)</b>
    }

    @AfterClass
    public static void stopServer() {
        if (server != null) {
            server.stop();
        }
        if (client != null) {
            client.stop();
        }
    }

    @Test
    public void testHealthRespondsOK()  {
        Map m = client.toBlocking().retrieve(HttpRequest.GET("/health"), Map.class); <i class="conum" data-value="3"></i><b>(3)</b>
        assertNotNull(m);
        assertTrue(m.containsKey("status"));
        assertEquals(m.get("status"), "UP");
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>To run the application from a unit test you can use the <a href="http://docs.micronaut.io/snapshot/api/io/micronaut/runtime/server/EmbeddedServer.html">EmbeddedServer</a> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Register a <code>RxClient</code> bean in the application context and point it to the embedded server URL. The <code>EmbeddedServer</code> interface provides the URL of the server under test which runs on a random port.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Creating HTTP Requests is easy thanks to Micronaut&#8217;s fluid API.</td>
</tr>
</table>
</div>


<h1 id="deploy">3 Deploy to Elastic Beanstalk</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-elasticbeanstalk/edit/master/src/main/docs/guide/deploy.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Generate a Fat Jar with gradle command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">$ ./gradlew shadowJar
$ du -h build/libs/complete-0.1-all.jar
 11M    build/libs/complete-0.1-all.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The next screenshots illustrate the steps necessary to deploy an micronaut app to AWS Elastic Beanstalk:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>image::elasticbeanstalk1.png[]</pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/elasticbeanstalk2.png" alt="elasticbeanstalk2">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/elasticbeanstalk3.png" alt="elasticbeanstalk3">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Select Java Platform.</p>
</li>
<li>
<p>Click <em>Upload</em> button</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/elasticbeanstalk4.png" alt="elasticbeanstalk4">
</div>
</div>
<div class="paragraph">
<p>Upload your JAR.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/elasticbeanstalk5.png" alt="elasticbeanstalk5">
</div>
</div>
<div class="paragraph">
<p>Before you create the enviroment click "Configure more options". If you forget, you could change this after you created the environment.</p>
</div>
<div class="paragraph">
<p>By default, Micronaut applications will listen on port 8080. Elastic Beanstalk assumes that the application will listen on port 5000. There are two ways to fix this discrepancy: change the port Elastic Beanstalk is configured to use, or change the port the Micronaut application listens on. For this post, we will change the port the Micronaut application listens on.</p>
</div>
<div class="paragraph">
<p>The easiest way to do this is to specify the <strong>MICRONAUT_SERVER_PORT</strong> environment variable in the Elastic Beanstalk environment and set the value to 5000. (The configuration property name is server.port, but Micronaut allows you to specify a more environment variable-friendly name).</p>
</div>
<div class="paragraph">
<p>On the Configuration page in your environment, under Software Configuration, click the settings icon.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/elasticbeanstalk6.png" alt="elasticbeanstalk6">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/elasticbeanstalk7.png" alt="elasticbeanstalk7">
</div>
</div>
<div class="paragraph">
<p>Now you are ready to click <strong>Create Environment</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/elasticbeanstalk8.png" alt="elasticbeanstalk8">
</div>
</div>
<div class="paragraph">
<p>After a few minutes you will be able to access the <code>/health</code> endpoint.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/elasticbeanstalk9.png" alt="elasticbeanstalk9">
</div>
</div>


<h1 id="nextSteps">4 Next Steps</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-guides/micronaut-elasticbeanstalk/edit/master/src/main/docs/guide/nextSteps.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Explore more features with <a href="http://guides.micronaut.io">Micronaut Guides</a>.</p>
</div>

</article>
</div>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115754405-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-115754405-1');
</script>
</body>
</html>
